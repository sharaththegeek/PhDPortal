{%load static%}
<html>
<head>
	<title>SASTRA Deemed University</title>
	<meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
	<link rel="stylesheet" href="{%static 'header.css' %}">
	<link rel="stylesheet" href="{%static 'scholar.css' %}">
	<script src="{% static 'header.js' %}"></script>
	<!--Materialize CSS-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

	<!-- Compiled and minified JavaScript for Materialize -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <title>Research - SASTRA Deemed University</title>
</head>
<body oncontextmenu="return false" >
			
	<div id="navbar" style="z-index:999">
			<a href="/logq" class="buttons">{{logg}}</a>
			<a href="javascript:void(0)" class="buttons">Downloads</a>
				<a href="http://www.sastra.edu" class="buttons">SASTRA Home</a>
				<p class="main">Research Portal</p>
			<a href="http://www.sastra.edu" class="brand-logo"><div class="logo2"><img src="https://www.sastra.edu/images/sastra/SASTRA_DEEMED_NEW_1.png" alt="SASTRA" /></div></a>
	</div>
	<div id="navbar-mobile">
		<a href="#" class="brand-logo"><div class="logo2"><img src="https://www.sastra.edu/images/sastra/SASTRA_DEEMED_NEW_1.png" alt="SASTRA" /></div></a>
		<a href="javascript:void(0);" class="icon" onclick="sideLoad()">
					<i class="fas fa-bars"></i>
		</a>
	</div>
	<div id="sidebar-mobile">
		<a href="javascript:void(0);" class="icon" onclick="sideClose()">
					<i class="fas fa-times"></i>
		</a>
		<a href="#about" onclick="sideClose()">{{logg}}</a>
		<a href="#" onclick="sideClose()">Downloads</a>
		<a href="#" onclick="sideClose()">SASTRA Home</a>
	</div> 	
			<!---------------- Mid content ----------------------------------->
					<div class="clearpad"><div class="item-page">
						<style>
					body {font-family: Arial;}				
					.dropdown{
						display:none;
					}
					.dropdown1{
						display: none;
					}
					.tablinks{
						color: white;
					}
					.tabtitle{
						text-align: left;
					}
					.DCMembers{
					  border: '1';
					}
					.welcome{
						float:right;
						margin-right: 2%;
					}
					.holding{
						margin-left: 15%;
            z-index: 0;
					}
					.tabs{ 
						width: 50%;
					}
					.tab{
						text-decoration: none;
						
					}
					.tabs .indicator{
  background-color: #3C5EC1;
}

					.main{
	margin-right: 20%
}
					.tabbed{
						color: white;
						text-decoration: none;
					}
				
					</style>
					</head>
					<body>
					
					<br>
					<h6><p class="welcome">Welcome {{name}}</p></h6>	
          <div class="hold">
						<div class="holding s-12">
							<ul class="tabs tabs-fixed-width">
								<li class="tab"><a class="tabbed" href="#profile"><span class="blue-text text-darken-2">Profile</span></a></li>
								<li class="tab"><a class="tabbed" href="#progress"><span class="blue-text text-darken-2">Progress</span></a></li>
								<li class="tab"><a class="tabbed" href="#messages"><span class="blue-text text-darken-2">Messages</span></a></li>
							</ul>
						</div>
					</div>
				<br>
				<div id="profile">
							<div class="divided">
							<div class="done">
							<div class="card">
								<div class="card-title">Personal Details</div>
								<br/>
								<table>
										<tr>
											<th class="tabtitle" style="width:30%">Name:</th>
											<td style="text-align:center">{{name}} {{lname}}</td>
										</tr>
										<tr>
											<th class="tabtitle">Date of Birth:</th>
											<td style="text-align:center">{{dob}}</td>
										</tr>
										<tr>
											<th class="tabtitle">Sex:</th>
											<td style="text-align:center">{{sex}}</td>
										</tr>
										<tr>
											<th class="tabtitle">Registration Number:</th>
											<td style="text-align:center">{{regno}}</td>
										</tr>
										<tr>
											<th class="tabtitle">Registration Date:</th>
											<td style="text-align:center">{{regdate}}</td>
										</tr>
										<tr>
											<th class="tabtitle">School:</th>
											<td style="text-align:center">{{school}}</td>
										</tr>
									</table><br/>
									<button class="btn-small waves-effect waves-light blue" onclick="toggled()">Change Password</button><br/><br/>
					<div class="pwd" id="pwd">
						<form method="POST" action="http://127.0.0.1:8000/chnpwd/">{%csrf_token%}
							<div class="input-field">
								<input id='regno' type="password" name='old' required/>
								<label for="regno">Old Password</label>
							</div><br/>
							<div class="input-field">
								<input id='regno' type="password" name='new' required/>
								<label for="regno">New Password</label>
							</div><br/>
							<div class="input-field">
								<input id='regno' type="password" name='old' required/>
								<label for="regno">Re-enter New Password</label>
							</div><br/>
						<button type="button" class="btn-small waves-effect waves-light blue" value="Cancel" onclick="document.getElementById('pwd').style.display='none'">Cancel</button>
						<button type="submit" class="btn-small waves-effect waves-light blue" value="Submit">Submit</button><br/><br/>
					</form>
						</div>
						</div>
					</div>
	
					<div class="done">
							<div class="card">
								  <br>
							<center><h5>Current Status: {{dbLatest.name}} Completed</h5></center>	
								<h5>Supervisor: Dr. {{supervisor}} </h5>
								<h5>Publication Details</h5>
								<table border="1">
									<tr>
										<th>Title of the Publication</th>
										<th>Name of the Journal</th>
										<th>Authors </th>
										<th>Year of Publication</th>
									</tr>
									{%for p in pubs%}
										<tr>
											<td>{{p.title}}</td>
											<td>{{p.name}}</td>
											<td>{{p.author}}</td>
											<td>{{p.date}}</td>
										</tr>
									{%endfor%}
		
								</table>
						</div>
					</div>
				</div>
			</div>
          <div id="progress" >
						<div class="divided">
							<div class="done">
							<div class="card">
								Completed:
								<ul class="collapsible popout">
									<li class="active">
										<div class="collapsible-header">{{dbLatest.name}}</div>
										<div class="collapsible-body">
											{% if dbLatest.level == 1 %}
											 <p>Presented on: {{dbLatest.presented}} </p>
											 <p>Provisionally Admitted: Yes </p>
											{% elif dbLatest.level == 2 or dbLatest.level == 5 or dbLatest.level == 6 %}
											<p>Held on: {{dbLatest.date}}</p>
											<p>DC Members:</p>
											<p>Comments: {{dbLatest.comments}}</p>
											{% elif dbLatest.level == 9%}
											<p>Date: {{dbLatest.date}}</p>
											<p>Comments: {{dbLatest.comments}}</p>
											{% elif dbLatest.level == 4 or dbLatest.level == 7 or dbLatest.level == 8 or dbLatest.level == 10%}
											<p>Date: {{dbLatest.date}}</p>
											<p>Comments: {{dbLatest.comments}}</p>
											{% elif dbLatest.level == 3%}
											<p>Subjects:</p>
											<table>
													<tr>
													<th>Course Code</th>
													<th>Course Name</th>
													<th>Date</th>
													<th>Marks</th>
													<th>Status</th>
													</tr>
													{%for subject in subjects%}
													<tr>
															<td>{{subject.code}}</td>
															<td>{{subject.name}}</td>
															<td>{{subject.datePassed}}</td>
															<td>{{subject.marks}}</td>
															<td>{{subject.status}}</td>
													</tr>
													{%endfor%}
											</table>											
											{% endif %}
										</div>
									</li>
									{%for others in dbOthers%}
									<li>
											<div class="collapsible-header">{{others.name}}</div>
											<div class="collapsible-body">
												{% if others.level == 1%}
												 <p>Presented on: {{others.presented}} </p>
												 {%ifequal others.fees "paid"%}
												 <p>Provisionally Admitted: Yes </p>
												 {%else%}
												 <p>Provisionally Admitted: No </p>
												 {%endifequal%}
												{% elif others.level == 2 or others.level == 5 or others.level == 6 %}
												<p>Held on: {{others.date}}</p>
												<p>DC Members:</p>
												<p>Comments: {{others.comments}}</p>
												{% elif others.level == 9%}
												<p>Date: {{others.date}}</p>
												<p>Comments: {{others.comments}}</p>
												{% elif others.level == 4 or others.level == 7 or others.level == 8 or others.level == 10%}
												<p>Date: {{others.date}}</p>
												<p>Comments: {{others.comments}}</p>
												{% elif others.level == 3%}
												<p>Subjects:</p>
												<table>
														<tr>
														<th>Course Code</th>
														<th>Course Name</th>
														<th>Date</th>
														<th>Marks</th>
														<th>Status</th>
														</tr>
														{%for subject in subjects%}
														<tr>
																<td>{{subject.code}}</td>
																<td>{{subject.name}}</td>
																<td>{{subject.datePassed}}</td>
																<td>{{subject.marks}}</td>
																<td>{{subject.status}}</td>
														</tr>
														{%endfor%}
												</table>								
												{%endif%}
											</div>
										</li>
									{% endfor %}
								</ul>							
							</div>
						</div>
						<div class="done">
							<div class="card">
								Upcoming:
								<ul class="collapsible popout">
									<li class="active">
										<div class="collapsible-header">{{dbNext.name}}</div>
										<div class="collapsible-body">
												{% if dbNext.level == 1%}
												 <p>Presented on: {{dbNext.presented}} </p>
												 {%ifequal dbNext.fees "Paid" %}
												 <p>Provisionally Admitted: Yes </p>
												 {%else%}
												 <p>Provisionally Admitted: No </p>
												 {%endifequal%}
												{% elif dbNext.level == 2 or dbNext.level == 5 or dbNext.level == 6 %}
												{% if dbNext.date %}
												<p>To be held on: {{dbNext.date}}</p>
												<p>DC Members:</p>
												{% else %}
												<p>To be held on: TBA</p>
												{% endif %}
												{% elif dbNext.level == 9%}
												<p>To be submitted before: {{dbNext.date}}</p>
												{% elif dbNext.level == 4 or dbNext.level == 7 or dbNext.level == 8 or dbNext.level == 10%}
												<p>Date: {{dbNext.date}}</p>
												{% elif dbNext.level == 3%}
												<p>Suggested Coursework:</p>
												<table>
												<tr>
													<td>Course Code</td>
													<td>Course Name</td>
												</tr>
												{%for subject in subjects %}
												<tr>
													<td>{{subject.code}}</td>
													<td>{{subject.name}}</td>
												</tr>
												{%endfor%}
											</table>
												{%endif%}
											</div>
									</li>
									{% for come in dbRest%}
									<li>
									<div class="collapsible-header">{{come.name}}</div>
							   	</li>
									{%endfor%}
								</ul>	
								
							</div>
						</div>
						</div>
						<br><br>
					</div>
					<div id="messages">
						<div class="card">
							<div class="headed">
							<h5>Reports</h5></div><br/>
							<p style="text-align: center">No reports to show currently!</p><br/>
						</div>
						<div class="message">
							<div class="card">
							<div class="headed">
							<h5>Messages</h5>
							<a class="messenger btn-floating tooltipped waves-effect waves-light blue darken-3" href="/texted/" data-position="top" data-tooltip="Click to send a new message"><i class="material-icons">add</i></a>
							<br/>
							<br/>
						</div>
							{% if dbMessages %}
							{% for message in dbMessages %}
							{% if message.schunread == True %}
							<b>
							<form action="/Mview/" method="POST">{%csrf_token%}
							<input type="hidden" name="tid" value="{{message.tid}}">
							<button type="submit">
							{{message.head}}
						</button>
					   	</form> 
							</b>
							{% else %}
							<form action="/Mview/" method="POST">{%csrf_token%}
								<input type="hidden" name="tid" value="{{message.tid}}">
								<button type="submit">
								{{message.head}}
							</button>
							</form> 
							{% endif %}
							{% endfor %}
							{% else %}
							<p style="text-align: center">No messages to show currently!</p>
							{% endif %}
						</div>
						</div>
					</div>
					<script>
						var element=document.querySelector('.tabs');
						var instance=M.Tabs.init(element,{
							swipeable: false	,
						});
						document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('.collapsible');
             var instances = M.Collapsible.init(elems, {});
          });


					</script>
					<style>
					.button {
					    background-color:#003399; 
					    border: bold;
					    color: white;
					    padding: 15px 32px;
					    text-align: center;
					    text-decoration: none;
					    display: inline-block;
					    font-size: 15px;
					}
				
				
					.pwd{
						display: none;
					}
</style>
</div>
</div>
 </div>
				</div>
		<div id="bottom">
			<div style="<!--border:1px outset #eee;-->">
				<div id="bottom-1">
				<div id="bottom_useful-link"><div class="clear"></div></div>
				<div id="bottom2"><div class="clear"></div></div>
				<div id="bottom_contact"><div class="clear"></div></div>
				<div class="clear"></div>
				</div>
			</div>
		</div>
		</div><div class="clear"></div>
		</div>
	</div>
<style>
	.headed{
		padding-top: 2px;
		text-align: center;
	}
	body{
		height:75%;
	}
	.messenger{
		float: right;
		margin-right: 1%;
	}
.footer{
	width:100%;
	background-color: #3C5EC1;
	color:white;
	height: 5%;
	text-align: center;
	z-index: 999%;
}
.input-field label {
     color: grey;
   }
   .input-field{
		 width: 90%;
		 margin: auto;
	 }
   .input-field #regno:focus + label {
     color: grey;
   }
   /* label underline focus color */
   #regno:focus {
     border-bottom: 1px solid grey;
     box-shadow: 0 1px 0 0 grey;

   }
</style>
<br>
<div class="footer">
	<p class="footer-text">&copy; SASTRA DEEMED UNIVERSITY, All Rights Reserved. 2019</p>
</div>

</div>
<script>
	function toggled(){
		if(document.getElementById('pwd').style.display=='block'){
         document.getElementById('pwd').style.display = "none";
		}
		else {
			document.getElementById('pwd').style.display = "block"
		}
	}
	document.addEventListener('DOMContentLoaded',function(){
    var elems=document.querySelectorAll('.tooltipped');
		var instances=M.Tooltip.init(elems);
	});
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-48118274-1', 'auto');
	  ga('send', 'pageview');
	</script>
</body>
</html>
